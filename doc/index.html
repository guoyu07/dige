<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Dige 0.1</title><link href="style.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.76.1" name="generator">
    <meta name="keywords" content="dige, c++, image processing algorithms
    development, visualization framework, Matthieu Garrigues"/>

    <meta name="description" content="Dige website"/>
    <meta name="abstract" content="Dige, a visualization framework to help image processing algorithms development."/>

    <meta name="author" content="Matthieu Garrigues"/>
    <meta name="copyright" content="2010, Matthieu Garrigues"/>
    <meta name="revisit-after" content="14 days"/>
    <meta http-equiv="Last-Modified" content="10 October 2010 21:23:40 GMT" />
    <meta http-equiv="Expires" content="15 October 2010 21:23:40 GMT" />
    <meta name="distribution" content="global"/>
    <meta name="robots" content="all"/>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1"/>
    <meta http-equiv="content-language" content="en"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta name="generator" content="emacs"/>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16982622-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="Dige 0.1"><div class="titlepage"><div><div><h2 class="title"><a name="dige"></a>Dige 0.1</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Matthieu</span> <span class="surname">Garrigues</span></h3></div></div></div><div><p class="copyright">Copyright &copy; 2010 Matthieu Garrigues</p></div><div><div class="legalnotice" title="Legal Notice"><a name="N10017"></a><p>
        Distributed under the LGPL License, Version 3.0.
      </p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#dige.intro">Introduction</a></span></dt><dt><span class="section"><a href="#dige.features">Features</a></span></dt><dt><span class="section"><a href="#dige.screenshot">Screenshot</a></span></dt><dt><span class="section"><a href="#dige.install">Compilation and Installation</a></span></dt><dt><span class="section"><a href="#dige.tutorial">Tutorial</a></span></dt><dt><span class="section"><a href="#dige.shortcuts">Shortcuts</a></span></dt><dt><span class="section"><a href="#dige.links">Links</a></span></dt></dl></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.intro"></a>Introduction</h2></div></div></div><p>
      As a developer of image processing applications, I always need
      to visualize evolution of algorithms over the time. Typically,
      if a loop is updating an image X, I want to display X after each
      iteration. Or, if an algorithm acts according to parameter x, I
      want to tune x using a slider and directly see its impact.  The
      goal of this project is to provide very simple tools to make
      this possible.

      Dige wraps a subset of the Qt framework and defines a very
      simple API to create and manage basic graphical user interfaces
      (GUI) that aims to:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Visualize data</li><li class="listitem">Control the state of some variables</li></ul></div><p>

      To be as light as possible, no additional thread is needed by
      the GUI. This library is build on top of the Qt framework.
      It is licensed under LGPL.
    </p><p>
      Tested environments:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Linux (Ubuntu) / g++-4.4.3</li></ul></div><p>
    </p></div><div class="section" title="Features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.features"></a>Features</h2></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Display images in multiple windows.</li><li class="listitem">Pan-zoom.</li><li class="listitem">Color picker.</li><li class="listitem">Video capture of windows.</li><li class="listitem">Pause / resume the program.</li><li class="listitem">Full-screen windows.</li></ul></div><p>
    </p></div><div class="section" title="Screenshot"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.screenshot"></a>Screenshot</h2></div></div></div><p>
      </p><div><img src="images/screenshot.jpg"></div><p>
    </p></div><div class="section" title="Compilation and Installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.install"></a>Compilation and Installation</h2></div></div></div><p>
      </p><pre class="programlisting">
git clone git://gitorious.org/dige/dige.git dige
cd dige
mkdir build
cd build
INSTALL_PREFIX=$fixme$ cmake .. [ -DWITH_RECORDING:bool=ON ]
make
(sudo) make install
      </pre><p>
      Use <code class="code">INSTALL_PREFIX</code> to install the library in an other place
      than the default one.
      <code class="code">-DWITH_RECORDING:bool=ON</code> enable video recording. Need FFmpeg.
    </p></div><div class="section" title="Tutorial"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.tutorial"></a>Tutorial</h2></div></div></div><p>
This little piece of code shows how to use dige to display a
simple <code class="code">rgb_image</code> image type.
</p>
<pre class="programlisting">
      
 <span xmlns:saxon="http://saxon.sf.net/" xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color: #800" class="hl-comment">// Needed by rand.</span>
<span style="color: #402080" class="hl-directive">#include &lt;cstdlib&gt;</span>

<span style="color: #800" class="hl-comment">// Dige includes.</span>
<span style="color: #402080" class="hl-directive">#include &lt;dige/window.h&gt;</span>
<span style="color: #402080" class="hl-directive">#include &lt;dige/image.h&gt;</span>

    </pre><p>
We define here our simple 2d image type that will be displayed by dige.
</p><pre class="programlisting">
      

<span style="color: #800" class="hl-comment">// A simple rgb image type</span>
<span style="color: #008" class="hl-keyword">struct</span> rgb_image
{
  rgb_image(<span style="color: #008" class="hl-keyword">unsigned</span> w, <span style="color: #008" class="hl-keyword">unsigned</span> h)
    : width(w),
      height(h),
      image_size(w * h * <span style="color: #066" class="hl-number">3</span>)
  {
    data = <span style="color: #008" class="hl-keyword">new</span> <span style="color: #008" class="hl-keyword">unsigned</span> <span style="color: #008" class="hl-keyword">char</span>[image_size];
  }

  ~rgb_image()
  {
    <span style="color: #008" class="hl-keyword">delete</span> data;
  }

  <span style="color: #008" class="hl-keyword">unsigned</span> width;
  <span style="color: #008" class="hl-keyword">unsigned</span> height;
  <span style="color: #008" class="hl-keyword">unsigned</span> image_size;
  <span style="color: #008" class="hl-keyword">unsigned</span> <span style="color: #008" class="hl-keyword">char</span>* data;
};

    </pre><p>
Now, let's adapt our image type to dige's internal image type. Since
<code class="code">rgb_image</code> handle a buffer of contiguous rgb pixels
with <code class="code"><span style="color: #008" class="hl-keyword">unsigned</span> <span style="color: #008" class="hl-keyword">char</span></code>, we can adapt it
into <code class="code">dg::image&lt;dg::trait::format::rgb, <span style="color: #008" class="hl-keyword">unsigned</span>
<span style="color: #008" class="hl-keyword">char</span>&gt;</code>.

</p><pre class="programlisting">
      
<span style="color: #008" class="hl-keyword">namespace</span> dg
{
  image&lt;trait::format::rgb, <span style="color: #008" class="hl-keyword">unsigned</span> <span style="color: #008" class="hl-keyword">char</span>&gt;
  adapt(<span style="color: #008" class="hl-keyword">const</span> rgb_image&amp; i)
  {
    <span style="color: #008" class="hl-keyword">return</span> image&lt;trait::format::rgb, <span style="color: #008" class="hl-keyword">unsigned</span> <span style="color: #008" class="hl-keyword">char</span>&gt;
      (i.width, i.height, i.data);
  }
}

    </pre><p>
      Note that we overload here the function <code class="code">dg::adapt</code> that will
      be called internally by dige to convert instances
      of <code class="code">rgb_image</code>. Once we made the adaptor, instances
      of <code class="code">rgb_image</code> can be directly passed to dige operator.
    </p><pre class="programlisting">
      
<span style="color: #008" class="hl-keyword">int</span> main()
{
  <span style="color: #008" class="hl-keyword">using</span> dg::display; <span style="color: #800" class="hl-comment">// Dige display.</span>
  <span style="color: #008" class="hl-keyword">using</span> dg::dl; <span style="color: #800" class="hl-comment">// Dige list starter</span>

  srand(time(<span style="color: #066" class="hl-number">0</span>));
  <span style="color: #800" class="hl-comment">// Initialize an image.</span>
  rgb_image img(<span style="color: #066" class="hl-number">200</span>, <span style="color: #066" class="hl-number">200</span>);

  <span style="color: #008" class="hl-keyword">unsigned</span> t = clock();
  <span style="color: #008" class="hl-keyword">while</span> (clock() - t &lt; <span style="color: #066" class="hl-number">5</span> * CLOCKS_PER_SEC)
  {
    <span style="color: #800" class="hl-comment">// Fill img with random values.</span>
    <span style="color: #008" class="hl-keyword">for</span> (<span style="color: #008" class="hl-keyword">unsigned</span> i = <span style="color: #066" class="hl-number">0</span>; i &lt; img.image_size; i++)
      img.data[i] = rand();

    <span style="color: #800" class="hl-comment">// display it.</span>
    display(<span style="color: #080" class="hl-string">"random"</span>, <span style="color: #066" class="hl-number">300</span>, <span style="color: #066" class="hl-number">200</span>)
      &lt;&lt;= dl() - img - img +
                    img;
  }

  <span style="color: #800" class="hl-comment">// Pause the program at the end, and make the last image stay on the window.</span>
  dg::pause();
}

    </pre><p>
     In this program, with only one c++ statement, we displayed 3 copy of our
     randomly filled image in a window named "random" (see screeshot below).
     </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">dl()</code> tells
         to the compiler that we start a list of things to display.
       </li><li class="listitem"><code class="code">operator-</code> places the images from left to right.
       </li><li class="listitem"><code class="code">operator+</code> places the next image on the beginning of the
         next line, behind the current one.
       </li><li class="listitem"><code class="code">display("random", 300, 200)</code> refer to the window named
         "random". If it doesn't exists, create one of 300*200 pixels.
       </li><li class="listitem">
         Finally <code class="code">operator&lt;&lt;=</code> tells to the window "random" to draw
         our newly created displaylist.
       </li></ul></div><p>
     </p><div class="figure"><a name="N100A6"></a><p class="title"><b>Figure&nbsp;1.&nbsp;Random screenshot</b></p><div class="figure-contents"><div><img src="images/dige_random_example.jpeg" alt="Random screenshot"></div></div></div><p><br class="figure-break">
   </p><p>
     To capture the content of a window into a video, use the following:
    </p><pre class="programlisting">
      
      record(<span style="color: #080" class="hl-string">"video.avi"</span>) &lt;&lt;= display(<span style="color: #080" class="hl-string">"random"</span>, <span style="color: #066" class="hl-number">300</span>, <span style="color: #066" class="hl-number">200</span>)
      &lt;&lt;= dl() - img - img +
                    img;

    </pre><p>
    The codec used is FFVHUFF (ffmpeg). The window wont be resizable if
    recorded.
   </p></div><div class="section" title="Shortcuts"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.shortcuts"></a>Shortcuts</h2></div></div></div><p>
      Here is a list of what you can do within a dige window:
     </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
         Key 'f': toggle full-screen state of the current window.
       </li><li class="listitem">
         Key Space: Pause / Resume the program.
       </li><li class="listitem">
         Key 'r': Reset the pan-zoom state of the current window.
       </li><li class="listitem">
         Left click: Pan.
       </li><li class="listitem">
         Right click: Color picker.
       </li><li class="listitem">
         Mouse wheel: Zoom in / out.
       </li></ul></div><p>
    </p></div><div class="section" title="Links"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dige.links"></a>Links</h2></div></div></div><p>
     </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="ulink" href="http://www.ohloh.net/p/dige" target="_top">Dige on Ohloh</a></li><li class="listitem"><a class="ulink" href="http://gitorious.org/dige" target="_top">Dige on Gitorious</a></li></ul></div><p>
    </p></div></div></body></html>